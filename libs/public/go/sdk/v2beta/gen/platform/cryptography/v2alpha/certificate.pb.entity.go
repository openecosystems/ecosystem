// Code generated by protoc-gen-platform go/entity-unspecified-v2beta. DO NOT EDIT.
// source: platform/cryptography/v2alpha/certificate.proto

package cryptographyv2alphapb

import (
	"context"
	"encoding/json"

	"errors"
	specv2pb "github.com/openecosystems/ecosystem/libs/protobuf/go/sdk/v2beta/gen/platform/spec/v2"
	"github.com/openecosystems/ecosystem/libs/public/go/sdk/v2beta"
	"google.golang.org/protobuf/types/known/anypb"
	//specv2pb "github.com/openecosystems/ecosystem/libs/protobuf/go/sdk/v2beta/gen/platform/spec/v2"
	//typev2pb "github.com/openecosystems/ecosystem/libs/protobuf/go/sdk/v2beta/gen/platform/type/v2"
	//durationpb "google.golang.org/protobuf/types/known/durationpb"
	//timestamppb "google.golang.org/protobuf/types/known/timestamppb"
)

type CertificateSpecEntity struct {
	Certificate *Certificate
}

func NewCertificateSpecEntity(specContext *specv2pb.SpecContext) (*CertificateSpecEntity, error) {

	return &CertificateSpecEntity{
		Certificate: &Certificate{},
	}, nil

}

func NewCertificateSpecEntityFromSpec(ctx context.Context, s *specv2pb.Spec) (*CertificateSpecEntity, error) {
	data := &Certificate{}
	err := sdkv2betalib.GetDataFromSpec[*Certificate](ctx, s, data)
	if err != nil {
		return nil, sdkv2betalib.ErrServerInternal.WithInternalErrorDetail(err)
	}

	return &CertificateSpecEntity{
		Certificate: data,
	}, nil
}

func (entity *CertificateSpecEntity) ToProto() (*Certificate, error) {

	return entity.Certificate, nil

}

func (entity *CertificateSpecEntity) ToEvent() (*string, error) {

	bytes, err := json.Marshal(entity)
	if err != nil {
		return nil, err
	}

	event := string(bytes)

	return &event, nil

}

func (entity *CertificateSpecEntity) FromEvent(event *string) (*CertificateSpecEntity, error) {

	bytes := []byte(*event)
	err := json.Unmarshal(bytes, entity)
	if err != nil {
		return nil, err
	}

	return entity, nil

}

func (entity *CertificateSpecEntity) MarshalEntity() (*anypb.Any, error) {

	d, err := anypb.New(entity.Certificate)
	if err != nil {
		return nil, sdkv2betalib.ErrServerInternal.WithInternalErrorDetail(errors.New("failed to marshall entity"), err)
	}

	return d, nil

}

func (entity *CertificateSpecEntity) MarshalProto() (*anypb.Any, error) {

	proto, err := entity.ToProto()
	if err != nil {
		return nil, sdkv2betalib.ErrServerInternal.WithInternalErrorDetail(errors.New("failed to convert entity to proto"), err)
	}

	d, err := anypb.New(proto)
	if err != nil {
		return nil, sdkv2betalib.ErrServerInternal.WithInternalErrorDetail(errors.New("failed to marshall proto"), err)
	}

	return d, nil

}

func (entity *CertificateSpecEntity) TypeName() string {
	return "certificate"
}

func (entity *CertificateSpecEntity) CommandTopic() string {
	return CommandDataCertificateTopic
}

func (entity *CertificateSpecEntity) EventTopic() string {
	return EventDataCertificateTopic
}

func (entity *CertificateSpecEntity) RoutineTopic() string {
	return RoutineDataCertificateTopic
}

func (entity *CertificateSpecEntity) TopicWildcard() string {
	return CertificateTypeNameEventPrefix + ">"
}

func (entity *CertificateSpecEntity) SystemName() string {
	return "cryptography"
}

func (entity *CertificateSpecEntity) internal() {

	//
	//var _ timestamppb.Timestamp
	//created_at

	//
	//var _ timestamppb.Timestamp
	//updated_at

	//var _ durationpb.Duration
	//
	//duration

	// Struct
	// var _ *typev2pb.File
}
